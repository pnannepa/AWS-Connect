{"Version":"2019-10-30","StartAction":"ae18473f-4df7-40f4-9e71-0ba62db4c5b1","Metadata":{"entryPointPosition":{"x":53.6,"y":204.8},"ActionMetadata":{"ae18473f-4df7-40f4-9e71-0ba62db4c5b1":{"position":{"x":196.8,"y":186.4},"conditions":[],"conditionMetadata":[{"id":"bb163598-130d-4fe8-9e53-fc17c9988b22","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Sales Queue"},{"id":"c7110094-3cf9-4aeb-8817-a346266c1e37","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Customer Service Queue"},{"id":"e8986066-746b-45d7-bc1b-f8807f8debb5","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Technical Support Queue"}]},"cdc06d75-8cda-4160-978d-3039a7131a94":{"position":{"x":508.8,"y":182.4},"dynamicParams":[]},"a285bc57-7348-4548-869a-d1845b0b15af":{"position":{"x":512,"y":387.2},"dynamicParams":[]},"6d702c64-d9e7-402f-a45c-378a9cd5ca79":{"position":{"x":515.2,"y":587.2},"dynamicParams":[]},"f450eba5-55ca-4bb3-b0a1-289f9bb0302f":{"position":{"x":1360.8,"y":818.4}},"aeb2a576-1e9f-4563-870f-9348e99f57e3":{"position":{"x":2220.8,"y":357.6}},"e4dce370-fbec-4db2-8a0c-97806fa99943":{"position":{"x":1420.8,"y":373.6}},"1c52430b-2616-4384-b9a3-680613907f44":{"position":{"x":1972.8,"y":362.4}},"292b7c65-4758-4299-a4ee-c0b95e3e0145":{"position":{"x":1714.4,"y":366.4}},"52ad1b49-b1a9-4b14-8afa-168dc7dc9e40":{"position":{"x":2458.4,"y":711.2}},"a9f9cd28-cfbe-424a-b62a-f69227eac9e6":{"position":{"x":1971.2,"y":690.4}},"283f9c48-11e7-4b15-98ac-f4ec77685abc":{"position":{"x":2227.2,"y":702.4},"dynamicParams":[]},"f69adbe0-02f5-493c-bf92-db97d97c5af1":{"position":{"x":1142.4,"y":371.2},"conditionMetadata":[{"id":"852319de-b28f-4b77-a1fe-e6ef45c9dfda","value":"1"}]},"4985aa2d-5659-418c-86f3-0e7f86387d7f":{"position":{"x":1308,"y":154.4}},"098007b7-e257-4b7c-9c3c-741d4680517d":{"position":{"x":811.2,"y":366.4},"parameters":{"InterruptFrequencySeconds":{"unit":1}},"audio":[{"id":"arn:aws:connect:us-east-1:510701891233:instance/71c5c52e-0742-4fec-9106-6996e83e5aae/prompt/1cd5a236-044d-477d-ac09-f02ccf973d1f","text":null,"type":"Prompt"}],"timeoutUnit":{"value":"sec"}},"7eb1e66f-2dba-4b32-9476-6d6af7fe269e":{"position":{"x":1059.2,"y":153.6},"conditions":[],"conditionMetadata":[{"id":"baf8dd7e-8156-4014-a649-490767e5d63d","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"error"}]}},"Annotations":[],"name":"A2Z Cloud Customer Queue Flow","description":"Audio played when a customer is waiting in queue.","type":"customerQueue","status":"PUBLISHED","hash":{}},"Actions":[{"Parameters":{"ComparisonValue":"$.Queue.Name"},"Identifier":"ae18473f-4df7-40f4-9e71-0ba62db4c5b1","Type":"Compare","Transitions":{"NextAction":"f450eba5-55ca-4bb3-b0a1-289f9bb0302f","Conditions":[{"NextAction":"cdc06d75-8cda-4160-978d-3039a7131a94","Condition":{"Operator":"Equals","Operands":["Sales Queue"]}},{"NextAction":"a285bc57-7348-4548-869a-d1845b0b15af","Condition":{"Operator":"Equals","Operands":["Customer Service Queue"]}},{"NextAction":"6d702c64-d9e7-402f-a45c-378a9cd5ca79","Condition":{"Operator":"Equals","Operands":["Technical Support Queue"]}}],"Errors":[{"NextAction":"f450eba5-55ca-4bb3-b0a1-289f9bb0302f","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"Attributes":{"selectedqueue":"Sales"},"TargetContact":"Current"},"Identifier":"cdc06d75-8cda-4160-978d-3039a7131a94","Type":"UpdateContactAttributes","Transitions":{"NextAction":"098007b7-e257-4b7c-9c3c-741d4680517d","Errors":[{"NextAction":"f450eba5-55ca-4bb3-b0a1-289f9bb0302f","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"selectedqueue":"Customer Service"},"TargetContact":"Current"},"Identifier":"a285bc57-7348-4548-869a-d1845b0b15af","Type":"UpdateContactAttributes","Transitions":{"NextAction":"098007b7-e257-4b7c-9c3c-741d4680517d","Errors":[{"NextAction":"f450eba5-55ca-4bb3-b0a1-289f9bb0302f","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"selectedqueue":"Technical Support"},"TargetContact":"Current"},"Identifier":"6d702c64-d9e7-402f-a45c-378a9cd5ca79","Type":"UpdateContactAttributes","Transitions":{"NextAction":"098007b7-e257-4b7c-9c3c-741d4680517d","Errors":[{"NextAction":"f450eba5-55ca-4bb3-b0a1-289f9bb0302f","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"f450eba5-55ca-4bb3-b0a1-289f9bb0302f","Type":"EndFlowExecution","Transitions":{}},{"Parameters":{},"Identifier":"aeb2a576-1e9f-4563-870f-9348e99f57e3","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"CallbackNumber":"$.CustomerEndpoint.Address"},"Identifier":"e4dce370-fbec-4db2-8a0c-97806fa99943","Type":"UpdateContactCallbackNumber","Transitions":{"NextAction":"292b7c65-4758-4299-a4ee-c0b95e3e0145","Errors":[{"NextAction":"a9f9cd28-cfbe-424a-b62a-f69227eac9e6","ErrorType":"InvalidCallbackNumber"},{"NextAction":"a9f9cd28-cfbe-424a-b62a-f69227eac9e6","ErrorType":"CallbackNumberNotDialable"}]}},{"Parameters":{"SSML":"<speak> Thank you for choosing call back.  Agent will call you back on <say-as interpret-as =\"telephone\">$.CustomerEndpoint.Address</say-as> as soon as practical </speak>"},"Identifier":"1c52430b-2616-4384-b9a3-680613907f44","Type":"MessageParticipant","Transitions":{"NextAction":"aeb2a576-1e9f-4563-870f-9348e99f57e3","Errors":[{"NextAction":"a9f9cd28-cfbe-424a-b62a-f69227eac9e6","ErrorType":"NoMatchingError"}]}},{"Parameters":{"RetryDelaySeconds":"600","InitialCallDelaySeconds":"10","MaximumConnectionAttempts":"1"},"Identifier":"292b7c65-4758-4299-a4ee-c0b95e3e0145","Type":"CreateCallbackContact","Transitions":{"NextAction":"1c52430b-2616-4384-b9a3-680613907f44","Errors":[{"NextAction":"a9f9cd28-cfbe-424a-b62a-f69227eac9e6","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"52ad1b49-b1a9-4b14-8afa-168dc7dc9e40","Type":"EndFlowExecution","Transitions":{}},{"Parameters":{"Text":"Sorry an error occurred.  We will not be able to call you back"},"Identifier":"a9f9cd28-cfbe-424a-b62a-f69227eac9e6","Type":"MessageParticipant","Transitions":{"NextAction":"283f9c48-11e7-4b15-98ac-f4ec77685abc","Errors":[{"NextAction":"f450eba5-55ca-4bb3-b0a1-289f9bb0302f","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"CallBackStatus":"error"},"TargetContact":"Current"},"Identifier":"283f9c48-11e7-4b15-98ac-f4ec77685abc","Type":"UpdateContactAttributes","Transitions":{"NextAction":"52ad1b49-b1a9-4b14-8afa-168dc7dc9e40","Errors":[{"NextAction":"52ad1b49-b1a9-4b14-8afa-168dc7dc9e40","ErrorType":"NoMatchingError"}]}},{"Parameters":{"StoreInput":"False","InputTimeLimitSeconds":"5","Text":"All our agents are busy serving other customers.  We apologize for the delay.  Please press 1 if you prefer a call back, otherwise please continue to stay on the line."},"Identifier":"f69adbe0-02f5-493c-bf92-db97d97c5af1","Type":"GetParticipantInput","Transitions":{"NextAction":"f450eba5-55ca-4bb3-b0a1-289f9bb0302f","Conditions":[{"NextAction":"e4dce370-fbec-4db2-8a0c-97806fa99943","Condition":{"Operator":"Equals","Operands":["1"]}}],"Errors":[{"NextAction":"f450eba5-55ca-4bb3-b0a1-289f9bb0302f","ErrorType":"InputTimeLimitExceeded"},{"NextAction":"f450eba5-55ca-4bb3-b0a1-289f9bb0302f","ErrorType":"NoMatchingCondition"},{"NextAction":"a9f9cd28-cfbe-424a-b62a-f69227eac9e6","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"4985aa2d-5659-418c-86f3-0e7f86387d7f","Type":"EndFlowExecution","Transitions":{}},{"Parameters":{"Messages":[{"Text":"Thank you for calling. Please wait while we connect to a $.Attributes.SelectedQueue agent"},{"PromptId":"arn:aws:connect:us-east-1:510701891233:instance/71c5c52e-0742-4fec-9106-6996e83e5aae/prompt/1cd5a236-044d-477d-ac09-f02ccf973d1f"}],"InterruptFrequencySeconds":"30"},"Identifier":"098007b7-e257-4b7c-9c3c-741d4680517d","Type":"MessageParticipantIteratively","Transitions":{"NextAction":"f450eba5-55ca-4bb3-b0a1-289f9bb0302f","Conditions":[{"NextAction":"7eb1e66f-2dba-4b32-9476-6d6af7fe269e","Condition":{"Operator":"Equals","Operands":["MessagesInterrupted"]}}],"Errors":[{"NextAction":"f450eba5-55ca-4bb3-b0a1-289f9bb0302f","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.Attributes.CallBackStatus"},"Identifier":"7eb1e66f-2dba-4b32-9476-6d6af7fe269e","Type":"Compare","Transitions":{"NextAction":"f69adbe0-02f5-493c-bf92-db97d97c5af1","Conditions":[{"NextAction":"4985aa2d-5659-418c-86f3-0e7f86387d7f","Condition":{"Operator":"Equals","Operands":["error"]}}],"Errors":[{"NextAction":"f69adbe0-02f5-493c-bf92-db97d97c5af1","ErrorType":"NoMatchingCondition"}]}}]}